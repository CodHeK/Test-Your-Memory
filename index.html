</!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name = "viewport" content = "width=device">
	<meta name = "description" content = "Weather App">  
	<meta name = "keyword" content = "Memory Game, easy javascript games"> 
	<meta name = "author" content = "Elaine Mary Rose">
	
	<title> Memory Game </title>

	<script>
		
		var cards_array = ['1','2','3','4','5','6', '7', '8', '9', '10', '11', '12','1','2','3','4','5','6', '7', '8', '9', '10', '11', '12'];
		var tiles_flipped = 0;
		var cards_values = [];
		var cards_tile_ids=[];

		Array.prototype.cards_tile_shuffle = function() {

			var i = this.length, j, temp;
			while( i-- > 0) {

				j = Math.floor(Math.random() * (i+1));
				temp = this[j];
				this[j] = this[i];
				this[i] = temp;
			}
		}	

		function newBoard() {

			tiles_flipped = 0;
			var ans = '';
			cards_array.cards_tile_shuffle();
			for ( var i = 0; i < cards_array.length; ++i) {

				ans = ans + '<div id="tile_'+i+'"onclick="fliptile(this,\''+cards_array[i]+'\')"></div>';
			}
			document.getElementById('board').innerHTML = ans;
		}

		function fliptile(tile,val) {

			if(tile.innerHTML == "" && cards_values.length < 2) {

				tile.style.background = '#FFFFFF';
				tile.innerHTML = val;
				if ( cards_values.length == 0 ) {

					cards_values.push(val);
					cards_tile_ids.push(tile.id);
				}
				else if (cards_values.length == 1) {

					cards_values.push(val);
					cards_tile_ids.push(tile.id);
					if(cards_values[0] == cards_values[1]) {

						tiles_flipped = tiles_flipped + 2;

						cards_values = [];
						cards_tile_ids = [];

						if(tiles_flipped == cards_array.length) {

							alert("Board cleared... Generating New Board");
							document.getElementById('board').innerHTML = "";
							newBoard();
						}
					} 
					else {

						function flipback() {

							var tile_1 = document.getElementById(cards_tile_ids[0]);
							var tile_2 = document.getElementById(cards_tile_ids[1]);
							tile_1.style.background = 'url(cube.png) no-repeat';
							tile_1.innerHTML = "";
							tile_2.style.background = 'url(cube.png) no-repeat';
							tile_2.innerHTML = "";

							cards_values = [];
							cards_tile_ids = [];
						}
						setTimeout(flipback,500);
					}
				}
			}
		}
  
	</script>
	
	<link rel = "stylesheet" href = "game.css">

</head>
<body>

	<div id = "board"></div>
	<script>newBoard();</script>
</body>
</html>
